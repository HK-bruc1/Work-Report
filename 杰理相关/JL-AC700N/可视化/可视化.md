# 喇叭声道选择

- 7003D8？
  - 右声道喇叭才有声音。

# 提示音

## 打开按键音

`apps\earphone\board\br36\board_ac700n_demo_cfg.h`

```c
//*********************************************************************************//
//                                 key 配置                                        //
//*********************************************************************************//
#define KEY_NUM_MAX                        	10
#define KEY_NUM                            	3

#define MULT_KEY_ENABLE						DISABLE 		//是否使能组合按键消息, 使能后需要配置组合按键映射表

#define TCFG_KEY_TONE_EN					ENABLE		// 按键提示音。建议音频输出使用固定采样率 ----打开

/*
*********************************************************************
*                  Audio Key Tone Init OK
* Description: 解码初始化完成
* Arguments  : *ktone		按键提示音解码句柄
* Return	 : None.
* Note(s)    : None.
*********************************************************************
*/
static void key_tone_dec_hdl_init_ok(struct __key_tone *ktone)
{
#if (!defined(CONFIG_MEDIA_DEVELOP_ENABLE))
    if (audio_mixer_get_ch_num(&mixer) <= 1) {
#ifdef TCFG_WTONT_ONCE_VOL
        extern u8 get_tone_once_vol(void);
        app_audio_state_switch(APP_AUDIO_STATE_WTONE, get_tone_once_vol(), NULL);//补上NULL,不然少参数
#else
        app_audio_state_switch(APP_AUDIO_STATE_WTONE, get_tone_vol(), NULL);//补上NULL,不然少参数
#endif
    }
#endif
    /* clock_add_set(DEC_TONE_CLK); */
}

// 序号对应表
static const char *const key_tone_index[] = {
    //[KTONE_IDEX_NORAML] 	= DEFAULT_SINE_TONE(KTONE_SINE_NORAML),
    [KTONE_IDEX_NORAML] 	= FLASH_RES_PATH"key_tone.*",
    [KTONE_IDEX_NUM_0] 		= FLASH_RES_PATH"tone/0.*",
    [KTONE_IDEX_NUM_1] 		= FLASH_RES_PATH"tone/1.*",
};
/*
*********************************************************************
*                  Audio Key Tone Play
* Description: 按键提示音播放
* Arguments  : None.
* Return	 : None.
* Note(s)    : 默认播放
*********************************************************************
*/
void audio_key_tone_play(void)
{
    audio_key_tone_play_index(KTONE_IDEX_NORAML, 0);
    /* audio_key_tone_play_index(KTONE_IDEX_NUM_0, 0); */
    /* audio_key_tone_play_sin(sine_16k_normal, ARRAY_SIZE(sine_16k_normal), 0); */
}

//在JL701M_DONGLE_SDK_1.0.0\apps\common\device\key\key_driver.c中调用。
```

# 麦的配置

![image-20251112145402396](./可视化.assets/image-20251112145402396.png)

# 灯效

在可视化工具的情景配置中。

# VM

工具中改了东西，固件不生效，每次都需要清除VM

`apps\earphone\board\br36\board_ac700n_demo_global_build_cfg.h`

```c
//with single-bank mode,actual vm size should larger this VM_LEAST_SIZE,and dual bank mode,actual vm size equals this;
//config whether erased this area when do a update,1-No Operation,0-Erase
#define CONFIG_VM_OPT							0//1 每次刷新VM，避免出现旧固件功能
```

# ANC没有效果

进入ANC出现哒哒哒的声音，通透没有效果。双麦通话正常。

## 喇叭增益要对上。

- `audio\cpu\br36\audio_config_def.h`

```
#define MAX_ANA_VOL               (15)	// 系统最大模拟音量,范围: 0 ~ 15
//#define MAX_COM_VOL             (16)    // 数值应该大于等于16，具体数值应小于联合音量等级的数组大小 (combined_vol_list)
//#define MAX_DIG_VOL             (16)    // 数值应该大于等于16，因为手机是16级，如果小于16会导致某些情况手机改了音量等级但是小机音量没有变化
```

## 麦增益要对上

