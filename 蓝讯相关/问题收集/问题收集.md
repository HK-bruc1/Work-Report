# 开发问题（先留）

1、烧录问题，空片；如果后期需要烧录key是否可以

2、ANC软件编译、调试问题、装配问题（anc在代码改？配置工具没有看到选项）

3、通话调试文档（硅麦跟电容mic 配置如何区分）,以及ENC调试（包括ENC通话降噪极性图定义，0度在哪个位置）

4、软件工作流程图（对耳软件分左右）

5、入耳检测功能（**只在代码开启**）

6、信号不理想时软件方面是否可以做处理？RF参数？直接开最大是否有影响？另外时钟主频以及码率是否支持修改

7、关于低延时（软件支持AAC，如果打开低延时同时开启是否会有影响，低延时的数据）50ms

8、提示音如何更换（**文档已有**）

9、FCC/BQB认证

10、频偏如何调整？（正常范围多少，测试盒有校准值）

11、最大输出幅值？

12、LED灯（配对后一边闪灯一边不闪这种是否可以做到，以及灯闪的单位、频率如何理解？），另外TWS组队后左右耳状态？（副机连接成功？主机等待连接？）(TWS声道分配主右副左，这种情况灯是跟这个配置的声道走？？)

13、目前蓝汛是否可以适配app？用户可以在app自行定义操作、多段eq切换、app升级等功能

14、如果sdk更新的话，如何更新已经做货的软件？是否可以直接导入配置文件？（配置文件是否可以分类比如通话参数、提示音参数等）（软件码）

# 生产问题（先留）

1、是否都需要校准频偏？

2、如何批量升级？Pcb裸板阶段以及整机阶段

# 如何把打印打开

硬件的配置：

- app\platform\header\config_define.h

![image-20250505122135351](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250505122135351.png)

选中一个引脚（**一般使用PB3**）做打印，在配置中开启：

- app\projects\earphone\config.h
- 在配置工具中把有关灯效关闭，避免冲突。

![image-20250505122334770](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250505122334770.png)

![image-20250505122601450](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250505122601450.png)

- 不使用时，把宏改回来。打印信息在配置工具中可以看到。

# 定频烧录是干嘛的

定频烧录是指在蓝牙耳机的生产过程中，将特定的蓝牙通信频率信息写入耳机的蓝牙模块硬件中。这个频率通常是**耳机与蓝牙设备（如手机、电脑等）进行配对和数据传输时所使用的无线电波频率**。简单来说，它是一个将预设频率“烧录”到耳机中的技术步骤，确保耳机能够按照设计要求与外部设备通信。

定频烧录在蓝牙耳机开发中起到了以下几个重要作用：

1. **确保通信兼容性**
    蓝牙技术使用2.4GHz ISM频段进行通信，这个频段内有多个频道。定频烧录通过设定正确的频道和频率，确保耳机能够与各种蓝牙设备顺利配对和通信，避免因频率不匹配而导致的连接问题。
2. **提高连接稳定性**
    在2.4GHz频段内，存在许多其他无线设备（如Wi-Fi路由器、其他蓝牙设备等）的信号干扰。定频烧录通过设置特定的频率和参数（如跳频序列），减少干扰，从而提升耳机与设备连接的稳定性。
3. **满足法规要求**
    不同国家和地区对无线电频率的使用有严格的法律法规。**定频烧录确保耳机使用的频率符合目标市场的无线电管理规定，避免因违规而无法上市销售。**
4. **支持个性化设置**
    在某些情况下，定频烧录还可以用来调整耳机的特定功能或性能参数，以优化用户体验或满足不同用户的需求。

## 疑问

**那就是说如果我在中国使用美国版本的耳机，因为频率不一样，是有可能存在于耳机连接不上的蓝牙设备的？对吗？**

蓝牙设备使用的是 **2.4GHz ISM频段**，这个频段在全球范围内是通用的。但不同国家和地区对这个频段内的具体使用规则（比如频道分配和发射功率）有各自的法规要求：

- **中国**：由国家无线电管理委员会监管，可能对某些频道的使用有限制，或者对发射功率有更严格的要求。
- **美国**：由FCC（联邦通信委员会）制定标准，可能允许不同的频道或功率范围。

如果美国版本的耳机在设计时没有完全符合中国的法规要求，比如使用了在中国受限的频道或超过了允许的发射功率，那么在连接蓝牙设备时可能会出现问题，比如连接不稳定或完全无法连接。

**实际情况**

不过，在现实中，这种情况发生的概率很低，原因如下：

- **全球兼容性**：大多数蓝牙耳机（尤其是知名品牌的产品）在设计时会考虑到全球市场的需求，确保频率设置符合多个国家和地区的法规要求。因此，美国版本的耳机通常也能在中国正常使用。
- **自适应跳频（AFH）**：蓝牙技术内置了自适应跳频功能，可以自动检测周围的无线电干扰并跳到可用的频道。这意味着即使某些频道在某个国家不可用，耳机也能调整自己以适应当地环境，提高连接的稳定性。

### 是否存在万精油频率

**定频烧录的作用**

在蓝牙耳机开发中，**定频烧录**是指将特定的蓝牙通信频率信息写入耳机的蓝牙模块硬件中。这个过程的目的是让耳机具备基本的通信能力，确保它能够与蓝牙设备（如手机、电脑等）进行配对和数据传输。蓝牙技术使用的是**2.4GHz ISM频段**，这个频段在全球范围内是通用的，因此理论上可以为硬件烧录一个基础的频率设置。

**“万精油频率”是否可行？**

您提到的“万精油频率”，可以理解为一个通用的频率设置，让蓝牙耳机在全球范围内都能正常工作，而无需针对不同国家和地区的法规要求进行调整。表面上看，这似乎是可行的，因为2.4GHz ISM频段是全球通用的。然而，实际情况要复杂一些：

- 法规差异：不同国家和地区对2.4GHz频段内的具体使用规则（如频道分配和发射功率）有各自的法规要求。例如：
  - 在中国，国家无线电管理委员会可能限制某些频道的使用，或对发射功率有严格要求。
  - 在美国，FCC（联邦通信委员会）制定的标准可能允许不同的频道或功率范围。
- **实际操作**：虽然可以烧录一个基础的频率信息，但仅仅依靠这个“万精油频率”无法完全满足所有地区的法规要求，也无法保证在各种使用环境下的最佳性能。

**定频烧录的局限性与补充机制**

定频烧录只是为硬件提供了一个**基本的频率起点**，但蓝牙耳机的实际兼容性和稳定性并不完全依赖于此。以下因素在实际使用中起到了关键作用：

- **自适应跳频（AFH）功能**：蓝牙技术内置了这一功能，可以自动检测周围的无线电干扰，并动态调整到可用的频道。这种机制大大增强了耳机在不同环境下的连接稳定性。
- **设计与固件支持**：大多数蓝牙耳机在设计时会考虑全球市场的需求，通过硬件和软件的配合，确保频率设置能够适配多个国家和地区的法规要求。
- **其他影响因素**：设备之间的兼容性、固件版本以及周围的无线干扰等，也会影响耳机的性能。

# 软件开发问题

## 提示音的替换与新增

### 替换

默认读取的资源文件位置：
![image-20250507121202532](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507121202532.png)

**中英文的提示音以及anc和eq的资源**

![image-20250507121533346](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507121533346.png)

如果需要替换的话，新建一个相同结构文件夹然后去配置工具中选择即可。

![image-20250507121752563](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507121752563.png)

相同命名的sbc会被替换掉，其他还是使用默认的提示音。

![image-20250507122300131](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507122300131.png)

提示音的选择有三种：

- TONE音，电子音
- 语音，有人声的提示音
- 无提示音

#### 问题

**同名替换的是TONE音还是语音？**

- 按道理来讲应该是有同一状态下有两种提示音的
- 替换TONE音或者替换语音怎么办？

#### sbc文件的生成

提示音格式：要求转换前应该是wav格式

![image-20250507123053710](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507123053710.png)

如果不是，需要使用工具转换一下格式，还可以裁剪掉提示音的静默部分，缩小提示音大小

![image-20250507123449874](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507123449874.png)

![image-20250507123347654](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507123347654.png)

最后使用SBC脚本就可以使用得到SBC文件了，放到对应文件夹即可。

### 新增

之前没有的，属于新增提示音。

![image-20250507141330254](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507141330254.png)

增加一个名称为balabala.sbc的提示音，重新编译一下代码就可以在app\projects\earphone\res.h中看到对应的宏定义

![image-20250507141653871](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507141653871-1746598614503-1.png)

其他定义可以参照下面的音效实现。

app\platform\bsp\bsp_piano.h中定义一种提示音的名称

![image-20250507142344158](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507142344158.png)

**app\platform\bsp\bsp_warning_play.c绑定对应提示音**

![image-20250507142358782](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507142358782.png)

**使用提示音：**

![image-20250507142704343](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507142704343.png)

![image-20250507142904846](./%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86.assets/image-20250507142904846.png)

- **后面是提示音的类型，可以在配置工具配置的，会去配置文件中读取。**

- **自己硬编码的应该可以直接指定？**